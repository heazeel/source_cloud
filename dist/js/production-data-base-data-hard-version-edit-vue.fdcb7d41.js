(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["production-data-base-data-hard-version-edit-vue"],{bd0e:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("drawer-right",{staticClass:"hard-version-edit",attrs:{title:"硬件版本"+e.action.title,width:"700px","submit-func":e.handleSubmit},on:{open:e.init,cancel:function(t){return e.$router.back()}}},[r("el-form",{ref:"form",staticClass:"form-drawer",attrs:{rules:e.rules,model:e.form,"label-width":"110px"},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit(t)}}},[r("el-form-item",{attrs:{label:"类别",prop:"type_id"}},[r("select-remote",{attrs:{"api-key-obj":{type:"hardVersion",funcName:"remoteTypeSelect"}},on:{change:function(t){return e.clearContent(["model_id","version"])}},model:{value:e.form.type_id,callback:function(t){e.$set(e.form,"type_id",t)},expression:"form.type_id"}})],1),r("el-form-item",{attrs:{label:"原厂",prop:"factory"}},[r("select-remote",{attrs:{"api-key-obj":{type:"hardVersion",funcName:"remoteFactorySelect"}},on:{change:e.initFactoryCode},model:{value:e.form.factory,callback:function(t){e.$set(e.form,"factory",t)},expression:"form.factory"}})],1),r("el-form-item",{attrs:{label:"型号",prop:"model_id"}},[r("select-remote",{attrs:{"label-key":"code",params:{type_id:e.form.type_id,factory_id:e.form.factory_id},"api-key-obj":{type:"hardVersion",funcName:"remoteModelSelect"}},on:{change:function(t){return e.clearContent(["version"])}},model:{value:e.form.model_id,callback:function(t){e.$set(e.form,"model_id",t)},expression:"form.model_id"}})],1),r("el-form-item",{attrs:{label:"原厂编码",prop:"factory_code"}},[e._v(" "+e._s(e.form.factory_code)+" ")]),r("el-form-item",{attrs:{label:"硬件版本",prop:"version"}},[r("select-remote",{attrs:{"label-key":"version",params:{type_id:e.form.type_id,factory_id:e.form.factory_id,model_id:e.form.model_id,used:0},"api-key-obj":{type:"hardVersion",funcName:"remoteVersionSelect"}},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1),r("el-form-item",{staticClass:"block",attrs:{label:"备注",prop:"comment"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)],1)],1)},n=[],a=(r("4160"),r("159b"),r("96cf"),r("1da1")),i=r("5530"),c=r("6773"),l={create:{title:"新建",type:"create",submitFunc:c["create"]}},s={model_id:null,type_id:null,factory:null,factory_id:null,factory_code:null,version:null,comment:null},m={name:"HardVersionEdit",data:function(){return{action:l.create,form:this.$lodash.cloneDeep(s),rules:{model_id:[{required:!0,message:"请选择型号"}],type_id:[{required:!0,message:"请选择类别"}],factory:[{required:!0,message:"请选择原厂"}],version:[{required:!0,message:"请选择硬件版本"}]}}},watch:{"$route.query.id":{handler:function(e){this.action=e||0===e?Object(i["a"])({},l.update,{id:e}):l.create},immediate:!0}},methods:{init:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"create"===e.action.type&&(e.form=e.$lodash.cloneDeep(s));case 1:case"end":return t.stop()}}),t)})))()},handleSubmit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:if(r=t.sent,r){t.next=6;break}return t.abrupt("return");case 6:return o={model_id:e.form.model_id,type_id:e.form.type_id,factory_id:e.form.factory_id,version:e.form.version,comment:e.form.comment},"update"===e.action.type&&(o.id=e.form.id),t.next=11,e.action.submitFunc(o,{loading:!0});case 11:if(n=t.sent,200===n.code){t.next=14;break}return t.abrupt("return");case 14:e.$message({message:"".concat(e.action.title,"成功！"),type:"success",containerType:"drawer",onClose:function(){e.$router.back()}}),t.next=20;break;case 17:return t.prev=17,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()},initFactoryCode:function(e){void 0!==e.item&&(this.form.factory_id=e.item.id,this.form.factory_code=e.item.code),this.form.model_id=null,this.form.version=null},clearContent:function(e){var t=this;e.forEach((function(e){t.form[e]=null}))}}},d=m,u=r("2877"),f=Object(u["a"])(d,o,n,!1,null,null,null);t["default"]=f.exports}}]);