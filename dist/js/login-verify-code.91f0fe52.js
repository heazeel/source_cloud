(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login-verify-code"],{"7c04":function(e,n,o){},f6c8:function(e,n,o){"use strict";o.r(n);var r=function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"login-verify-code"},[o("input-animation",{attrs:{type:"number",label:"手机号",placeholder:"请输入手机号","error-info":e.errorInfoObj.phone},on:{blur:function(n){return e.checkValid("phone",!0)},input:function(n){return e.checkValid("phone")}},model:{value:e.form.phone,callback:function(n){e.$set(e.form,"phone",n)},expression:"form.phone"}}),o("input-animation",{attrs:{type:"number",label:"验证码",placeholder:"请输入验证码","error-info":e.errorInfoObj.code},on:{input:function(n){return e.checkValid("code")}},model:{value:e.form.code,callback:function(n){e.$set(e.form,"code",n)},expression:"form.code"}},[o("span",{directives:[{name:"show",rawName:"v-show",value:0==e.countDown,expression:"countDown == 0"}],staticClass:"verify-code get-verify",class:{disabled:""!==e.errorInfoObj.phone},on:{click:e.sendVerify}},[e._v("获取验证码")]),o("span",{directives:[{name:"show",rawName:"v-show",value:e.countDown>0,expression:"countDown > 0"}],staticClass:"verify-code verify-count-down"},[e._v(e._s(e.countDown)+"s")])])],1)},t=[],c=(o("d3b7"),o("ac1f"),o("96cf"),o("1da1")),a=o("c24f"),u=o("4c6b"),i={name:"LoginVerifyCode",components:{"input-animation":function(){return Promise.resolve().then(o.bind(null,"8c9c"))}},props:{errorInfo:{type:Object,default:function(){return{username:null,password:null}}}},data:function(){return{form:{login_type:2,phone:"",code:""},errorInfoObj:{phone:null,code:null},countDown:0,countDownInterval:null,canSubmit:!1}},watch:{errorInfo:{handler:function(e){e.phone&&(this.errorInfoObj.phone=e.phone),e.code&&(this.errorInfoObj.code=e.code)},deep:!0},"form.phone":{handler:function(){""==this.errorInfoObj.phone&&this.countDownInterval&&(clearInterval(this.countDownInterval),this.countDown=0,this.countDownInterval=null)}}},destroyed:function(){this.countDownInterval&&(clearInterval(this.countDownInterval),this.countDownInterval=null)},methods:{checkValid:function(e,n){var o=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("phone"!=e){r.next=4;break}return r.next=3,o.checkPhone(n);case 3:o.errorInfoObj.phone=r.sent;case 4:"code"==e&&(o.errorInfoObj.code=o.checkCode()),o.canSubmit=o.errorInfoObj.phone==o.errorInfoObj.code&&""==o.errorInfoObj.code,o.$emit("form-value-change",{form:o.form,error:o.errorInfoObj,canSubmit:o.canSubmit});case 7:case"end":return r.stop()}}),r)})))()},checkPhone:function(e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function o(){var r,t,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(r="",n.form.phone){o.next=5;break}r=null,o.next=14;break;case 5:if(/^1[0-9]{10}$/.exec(n.form.phone)){o.next=9;break}r="请输入11位正确格式手机号码",o.next=14;break;case 9:if(!e){o.next=14;break}return o.next=12,Object(a["existedSearch"])({phone:n.form.phone});case 12:t=o.sent,200==t.code&&(t.content.status||0==t.content.status)&&(c=["账号不存在","","账号被禁用，请联系企业管理员"],r=c[t.content.status]);case 14:return o.abrupt("return",r);case 15:case"end":return o.stop()}}),o)})))()},checkCode:function(){var e="";return this.form.code?/^[0-9]{6}$/.exec(this.form.code)||(e="请输入6位正确验证码"):e=null,e},sendVerify:function(e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function o(){var r,t;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e.preventDefault(),""!==n.errorInfoObj.phone){o.next=6;break}return o.next=4,Object(a["phoneCodeSend"])({phone:n.form.phone});case 4:r=o.sent,200==r.code?n.countDownFunc():210==r.code&&(t={u003:"phone",u004:"code",u005:"code",u007:"code"},n.errorInfoObj[t[r.msg]]=u["p"].get(r.msg).text);case 6:case"end":return o.stop()}}),o)})))()},countDownFunc:function(){var e=this;this.countDown=60,this.countDownInterval=setInterval((function(){e.countDown--,0==e.countDown&&(clearInterval(e.countDownInterval),e.countDownInterval=null)}),1e3)}}},s=i,f=(o("f8c9"),o("2877")),l=Object(f["a"])(s,r,t,!1,null,"21ecd5e8",null);n["default"]=l.exports},f8c9:function(e,n,o){"use strict";var r=o("7c04"),t=o.n(r);t.a}}]);