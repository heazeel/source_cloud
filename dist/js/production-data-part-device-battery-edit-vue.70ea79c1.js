(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["production-data-part-device-battery-edit-vue"],{"74f8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("drawer-right",{staticClass:"battery-edit",attrs:{title:"电池"+e.action.title,width:"700px","submit-func":e.handleSubmit},on:{open:e.init,cancel:function(t){return e.$router.back()}}},[r("el-form",{ref:"form",staticClass:"form-drawer",attrs:{rules:e.rules,model:e.form,"label-width":"90px"},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit(t)}}},[r("el-form-item",{attrs:{label:"产品编号",prop:"code",rules:[{required:!0,message:"请输入产品编号"},e.$tools.formRules.code,e.$tools.formRules.repeatCheck({value:e.form.code,id:e.form.id,module:"battery",field:"code"})]}},[r("el-input",{attrs:{disabled:"create"!=e.action.type,placeholder:"请输入数字"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),r("el-form-item",{attrs:{label:"型号",prop:"model_id"}},[r("select-remote",{attrs:{label:e.form.model,"label-key":"code","api-key-obj":{type:"battery",funcName:"remoteSelectSearch"}},model:{value:e.form.model_id,callback:function(t){e.$set(e.form,"model_id",t)},expression:"form.model_id"}})],1),r("el-form-item",{attrs:{label:"产品状态",prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.DEV_BOX_LIFE_STATUS,(function(e){return r("el-option",{key:e.key,attrs:{label:e.text,value:e.key}})})),1)],1),r("el-form-item",{staticClass:"block",attrs:{label:"备注",prop:"comment"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)],1)],1)},n=[],o=(r("96cf"),r("1da1")),c=r("5530"),l=r("6dc5"),i=r("4c6b"),s={create:{title:"新建",type:"create",submitFunc:l["create"]},update:{title:"修改",type:"update",submitFunc:l["update"]}},u={code:null,model_id:null,model:null,status:null,comment:null},m={name:"BatteryEdit",data:function(){return{action:s.create,form:this.$lodash.cloneDeep(u),rules:{model_id:[{required:!0,message:"请选择型号"}],status:[{required:!0,message:"请选择产品状态"}],comment:[this.$tools.formRules.default]},DEV_BOX_LIFE_STATUS:i["e"]}},watch:{"$route.query.id":{handler:function(e){this.action=e||0===e?Object(c["a"])({},s.update,{id:e}):s.create},immediate:!0}},methods:{init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("create"!==e.action.type){t.next=4;break}e.form=e.$lodash.cloneDeep(u),t.next=12;break;case 4:if("update"!==e.action.type){t.next=12;break}return t.next=7,Object(l["detailSearch"])({id:e.action.id},{loading:!0});case 7:if(r=t.sent,200===r.code){t.next=11;break}return e.form=e.$lodash.cloneDeep(u),t.abrupt("return");case 11:e.form=r.content;case 12:case"end":return t.stop()}}),t)})))()},handleSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:if(r=t.sent,r){t.next=6;break}return t.abrupt("return");case 6:return a={code:e.form.code,model_id:e.form.model_id,status:e.form.status,comment:e.form.comment},"update"===e.action.type&&(a.id=e.form.id),t.next=10,e.action.submitFunc(a,{loading:!0});case 10:if(n=t.sent,200===n.code){t.next=13;break}return t.abrupt("return");case 13:e.$message({message:"".concat(e.action.title,"成功！"),type:"success",containerType:"drawer",onClose:function(){e.$router.back()}}),t.next=19;break;case 16:return t.prev=16,t.t0=t["catch"](0),t.abrupt("return",t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()}}},d=m,f=r("2877"),p=Object(f["a"])(d,a,n,!1,null,null,null);t["default"]=p.exports}}]);