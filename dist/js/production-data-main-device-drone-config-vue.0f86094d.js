(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["production-data-main-device-drone-config-vue"],{1690:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("dialog-sc",{ref:"drone-config",staticClass:"drone-config",attrs:{title:"无人机配置"},on:{open:e.init,cancel:function(r){return e.$router.back()},submit:e.handleSubmit}},[t("el-form",{ref:"form",staticClass:"form-dialog",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"序号",prop:"no"}},[t("el-input",{attrs:{placeholder:"请输入数字"},model:{value:e.form.no,callback:function(r){e.$set(e.form,"no",r)},expression:"form.no"}})],1),t("el-form-item",{attrs:{label:"产品编号",prop:"code"}},[t("el-input",{attrs:{placeholder:"请输入数字"},model:{value:e.form.code,callback:function(r){e.$set(e.form,"code",r)},expression:"form.code"}})],1),t("el-form-item",{attrs:{label:"型号",prop:"model_id"}},[t("select-remote",{attrs:{label:e.form.model,"api-key-obj":{type:"drone",funcName:"modelRemoteSelectSearch"},placeholder:"请输入型号关键字"},on:{change:e.handleModelChange},model:{value:e.form.model_id,callback:function(r){e.$set(e.form,"model_id",r)},expression:"form.model_id"}})],1),t("el-form-item",{staticClass:"block",attrs:{label:"其他参数",prop:"paramsStr"}},[t("el-input",{attrs:{type:"textarea",placeholder:"格式：参数名:参数值\n一行一个，回车换行"},model:{value:e.form.paramsStr,callback:function(r){e.$set(e.form,"paramsStr",r)},expression:"form.paramsStr"}})],1)],1)],1)},a=[],n=(t("a9e3"),t("96cf"),t("1da1")),l=t("c415"),s={no:null,code:null,model_id:null,model:null,params:"",paramsStr:""},i={name:"DroneConfig",data:function(){return{form:this.$lodash.cloneDeep(s),rules:{no:[{required:!0,message:"请输入序号"},this.$tools.formRules.pureNumber],code:[{required:!0,message:"请输入产品编号"},this.$tools.formRules.default],model_id:[{required:!0,message:"请选择型号"}],paramsStr:[this.$tools.formRules.multipleParamsSplitWrap()]}}},methods:{init:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["configSearch"])({id:e.$route.query.id},{loading:!0});case 2:if(t=r.sent,200===t.code){r.next=6;break}return e.form=e.$lodash.cloneDeep(s),r.abrupt("return");case 6:t.content.paramsStr=JSON.parse(t.content.params),e.form=t.content;case 8:case"end":return r.stop()}}),r)})))()},handleSubmit:function(){var e=this;this.$refs.form.validate(function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(t){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return o={id:Number(e.$route.query.id),no:Number(e.form.no),code:e.form.code,model:e.form.model,model_id:Number(e.form.model_id)},e.form.paramsStr&&(o.params=JSON.stringify(e.$tools.paramsStrTransToObj(e.form.paramsStr))),r.next=6,Object(l["configUpdate"])(o,{loading:!0});case 6:if(a=r.sent,200===a.code){r.next=9;break}return r.abrupt("return");case 9:e.$message({message:"配置无人机".concat(e.form.no,"成功！"),type:"success",containerType:"dialog",onClose:function(){e.$router.back()}});case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},handleModelChange:function(e){var r=e.item;this.form.model=r.label}}},m=i,c=t("2877"),u=Object(c["a"])(m,o,a,!1,null,null,null);r["default"]=u.exports}}]);